<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Transitron â€“ Smart Road Reporting</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Plus+Jakarta+Sans:wght@700;800;900&amp;display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>


<nav>
  <a class="logo" onclick="showPage('home')">
    <div class="logo-icon">
      <svg width="20" height="20" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
        <circle cx="12" cy="9" r="2.5"/>
      </svg>
      <div class="logo-dot"></div>
    </div>
    <span class="logo-text">Trans<span>itron</span></span>
  </a>

  <div class="nav-links">
    <button class="nav-link active" id="nav-home"        onclick="showPage('home')">Home</button>
    <button class="nav-link"        id="nav-report"      onclick="showPage('report')">Report Issue</button>
    <button class="nav-link"        id="nav-map"         onclick="showPage('map')">Live Map</button>
    <button class="nav-link"        id="nav-leaderboard" onclick="showPage('leaderboard')">Leaderboard</button>
    <button class="nav-link"        id="nav-about"       onclick="showPage('about')">About</button>
  </div>

  <div class="nav-actions">
    <button class="btn-admin" id="nav-admin" onclick="showPage('admin')">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/>
      </svg>
      Admin
    </button>
    <button class="btn-dashboard" onclick="showPage('map')">
      <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
        <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
      </svg>
      Dashboard
    </button>
    <button class="btn-login" onclick="showPage('login')">
      <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/>
      </svg>
      Login
    </button>
  </div>
</nav>



<div id="page-home" class="page active">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-badge">ğŸ›£ï¸ Solapur's Smart Road Reporting Platform</div>
    <h1>Report Road Issues.<br><span>Get Them Fixed.</span></h1>
    <p>Empowering citizens to report road damage and holding the government accountable through AI-powered transparency and real-time tracking.</p>
    <div class="hero-actions">
      <button class="btn-primary"       onclick="showPage('report')">ğŸ“¸ Report an Issue</button>
      <button class="btn-outline-white" onclick="showPage('map')">ğŸ—ºï¸ View Live Map</button>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat"><div class="stat-num">2,847<span>+</span></div><div class="stat-label">Issues Reported</div></div>
    <div class="stat"><div class="stat-num">1,234</div><div class="stat-label">Resolved</div></div>
    <div class="stat"><div class="stat-num">156</div><div class="stat-label">Cities Covered</div></div>
    <div class="stat"><div class="stat-num">92<span>%</span></div><div class="stat-label">Citizen Satisfaction</div></div>
  </div>

  <!-- Features -->
  <div class="section">
    <div class="section-header">
      <div class="section-badge">âœ¨ Features</div>
      <h2 class="section-title">Everything You Need for <span>Safer Roads</span></h2>
      <p class="section-sub">A comprehensive platform that empowers citizens and enables government transparency  smart technology.</p>
    </div>
    <div class="feature-grid">
      <div class="feature-card"><div class="feat-icon gold">ğŸ“¸</div><h3>Smart Reporting</h3><p>Upload images with geotagging feature for accuracy, timestamps, and AI-powered pothole/road damage detection and verification.</p></div>
      <div class="feature-card"><div class="feat-icon blue">ğŸ“</div><h3>Live Tracking</h3><p>Real-time status updates from Pending to resolved with repair ETA and before/after photos.</p></div>
      <div class="feature-card"><div class="feat-icon gold">ğŸ†</div><h3>Gamification</h3><p>Earn points, unlock badges, climb leaderboards, and win monthly rewards for your contributions.</p></div>
      <div class="feature-card"><div class="feat-icon purple">ğŸ””</div><h3>Instant Alerts</h3><p>Get notified via SMS, email, and push notifications on repair progress and achievements.</p></div>
      <div class="feature-card"><div class="feat-icon blue">ğŸ›¡ï¸</div><h3>AI Verification</h3><p>Machine learning filters fake reports, detects duplicate issues, and auto-prioritizes by severity.</p></div>
      <div class="feature-card"><div class="feat-icon teal">ğŸ“Š</div><h3>Transparency Dashboard</h3><p>Public analytics showing department performance, repair times, and citizen ratings.</p></div>
      <div class="feature-card"><div class="feat-icon orange">âš¡</div><h3>Rapid Response</h3><p>Smart routing assigns complaints to nearest contractors for faster resolution.</p></div>
      <div class="feature-card"><div class="feat-icon blue">ğŸ‘¥</div><h3>Community Power</h3><p>Multiple reports on same issue boost priority. Unite for safer roads together.</p></div>
    </div>
  </div>


  <div class="steps-section">
    <div class="steps-inner">
      <div class="section-header">
        <div class="section-badge" style="background:rgba(240,165,0,0.2);color:var(--gold);">ğŸš€ How It Works</div>
        <h2 class="section-title" style="color:white;">Report in <span>3 Simple Steps</span></h2>
        <p class="section-sub" style="color:rgba(255,255,255,0.65);margin:0 auto;">Join thousands of citizens making Solapur's roads safer.</p>
      </div>
      <div class="steps-grid">
        <div class="step"><div class="step-num">1</div><h3>Snap &amp; Report</h3><p>Take a photo of the road damage with location and damage severity.</p></div>
        <div class="step"><div class="step-num">2</div><h3>AI Verification</h3><p>The system verifies the report, removes duplicates, and assigns a priority score automatically.</p></div>
        <div class="step"><div class="step-num">3</div><h3>Track Progress</h3><p>Follow your report from submission to resolution with real-time updates.</p></div>
        <div class="step"><div class="step-num">4</div><h3>Earn Rewards</h3><p>Collect points for every verified report. Climb the leaderboard and win monthly prizes.</p></div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-logo">Trans<span>itron</span></div>
    <p>Empowering citizens. Enabling transparency. Building safer roads for Solapur.</p>
    <p style="margin-top:12px">Â© 2026 Transitron. All rights reserved.(only for demonstrative purposes)</p>
  </footer>
</div>



<div id="page-report" class="page">

  <!-- Step 1 â€“ Issue Type & Severity -->
  <div class="report-page" id="report-step-1">
    <h1>Help Us Fix Roads</h1>
    <p class="sub">Submit a report in 3 easy steps. AI will verify and prioritize your complaint.</p>
    <div class="stepper">
      <div class="step-circle active" id="sc1">1</div>
      <div class="step-line" id="sl1"></div>
      <div class="step-circle" id="sc2">2</div>
      <div class="step-line" id="sl2"></div>
      <div class="step-circle" id="sc3">3</div>
    </div>
    <div class="report-card">
      <div class="report-section-title">What type of issue is it?</div>
      <div class="issue-grid">
        <button class="issue-btn" onclick="selectIssue(this,'Pothole')">      <span class="issue-icon">â­•</span>Pothole</button>
        <button class="issue-btn" onclick="selectIssue(this,'Broken Road')">  <span class="issue-icon">ğŸš§</span>Broken Road</button>
        <button class="issue-btn" onclick="selectIssue(this,'Waterlogging')"> <span class="issue-icon">ğŸ’§</span>Waterlogging</button>
        <button class="issue-btn" onclick="selectIssue(this,'Open Manhole')"> <span class="issue-icon">âš ï¸</span>Open Manhole</button>
        <button class="issue-btn" onclick="selectIssue(this,'Accident Zone')"><span class="issue-icon">ğŸš—</span>Accident Zone</button>
        <button class="issue-btn" onclick="selectIssue(this,'Other')">        <span class="issue-icon">ğŸ“‹</span>Other</button>
      </div>

      <div class="report-section-title">How severe is the damage?</div>
      <div class="severity-grid">
        <button class="sev-btn sev-low" onclick="selectSev(this,'Low')">
          <span><span class="dot" style="background:var(--green)"></span>Low</span>
          <div class="sev-desc">Minor issue, can be driven over</div>
        </button>
        <button class="sev-btn sev-med" onclick="selectSev(this,'Medium')">
          <span><span class="dot" style="background:var(--orange)"></span>Medium</span>
          <div class="sev-desc">Noticeable damage, slow driving advised</div>
        </button>
        <button class="sev-btn sev-high" onclick="selectSev(this,'High')">
          <span><span class="dot" style="background:var(--red)"></span>High</span>
          <div class="sev-desc">Dangerous, avoid if possible</div>
        </button>
      </div>

      <div class="report-nav">
        <button class="btn-back" onclick="showPage('home')">Back</button>
        <button class="btn-continue" onclick="goStep(2)">Continue â†’</button>
      </div>
    </div>
  </div>

  <!-- Step 2 â€“ Location & Photo -->
  <div class="report-page" id="report-step-2" style="display:none">
    <h1>Help Us Fix Your Roads</h1>
    <p class="sub">Tell us where it is and add photos.</p>
    <div class="stepper">
      <div class="step-circle done">âœ“</div>
      <div class="step-line active"></div>
      <div class="step-circle active">2</div>
      <div class="step-line"></div>
      <div class="step-circle">3</div>
    </div>
    <div class="report-card">
      <div class="form-group">
        <label class="form-label" for="inp-location">Location / Address</label>
        <div style="position:relative">
          <input class="form-input" id="inp-location" placeholder="e.g. Solapurâ€“Vijayapura National Highway, Solapur" autocomplete="off" oninput="locationSearch(this.value)" />
          <div id="location-suggestions" style="display:none;position:absolute;top:100%;left:0;right:0;background:white;border:1.5px solid var(--border);border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.12);z-index:100;max-height:220px;overflow-y:auto;margin-top:4px"></div>
          <div id="location-gps" style="margin-top:8px">
            <button type="button" onclick="getGPS()" style="background:none;border:none;color:var(--navy);font-size:0.82rem;cursor:pointer;font-family:inherit;display:flex;align-items:center;gap:6px;padding:0">
              ğŸ“ <span id="gps-label">Use my current location</span>
            </button>
          </div>
          <input type="hidden" id="inp-lat" />
          <input type="hidden" id="inp-lng" />
        </div>
      </div>
      <div class="form-group">
        <label class="form-label" for="inp-desc">Description (optional)</label>
        <textarea class="form-input" id="inp-desc" rows="3" placeholder="Describe the issue in detail..."></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">Upload Photo</label>
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
          <div class="upload-icon">ğŸ“·</div>
          <div style="font-weight:600;margin-bottom:4px">Click to upload or drag photo here</div>
          <div style="font-size:0.8rem">Supports JPG, PNG up to 10MB</div>
          <input type="file" id="fileInput" style="display:none" accept="image/*" onchange="handleFile(this)" />
        </div>
        <div id="file-preview" style="margin-top:10px;font-size:0.85rem;color:var(--green);display:none">âœ“ Photo attached</div>
      </div>
      <div class="report-nav">
        <button class="btn-back" onclick="goStep(1)">â† Back</button>
        <button class="btn-continue" onclick="goStep(3)">Continue â†’</button>
      </div>
    </div>
  </div>

  <div class="report-page" id="report-step-3" style="display:none">
    <h1>Help Us Fix Roads</h1>
    <p class="sub">Review your report before submitting.</p>
    <div class="stepper">
      <div class="step-circle done">âœ“</div>
      <div class="step-line active"></div>
      <div class="step-circle done">âœ“</div>
      <div class="step-line active"></div>
      <div class="step-circle active">3</div>
    </div>
    <div class="report-card">
      <div class="report-section-title">Review Your Report</div>
      <div class="review-item"><span class="review-label">Issue Type</span> <span class="review-val" id="rv-type">â€”</span></div>
      <div class="review-item"><span class="review-label">Severity</span>   <span class="review-val" id="rv-sev">â€”</span></div>
      <div class="review-item"><span class="review-label">Location</span>   <span class="review-val" id="rv-loc">â€”</span></div>
      <div class="review-item"><span class="review-label">Description</span><span class="review-val" id="rv-desc">â€”</span></div>
      <div class="review-item"><span class="review-label">Photo</span>      <span class="review-val" id="rv-photo">â€”</span></div>
      <div style="background:var(--gold-light);border:1px solid var(--gold);border-radius:10px;padding:14px 18px;margin:20px 0;font-size:0.88rem;color:var(--navy);">
        ğŸ¤– <strong>AI Verification:</strong> Your report will be verified by our AI system within 2â€“5 minutes.
      </div>
      <div class="report-nav">
        <button class="btn-back" onclick="goStep(2)">â† Back</button>
        <button class="btn-continue" onclick="submitReport()" style="background:var(--green);color:white">âœ“ Submit Report</button>
      </div>
    </div>
  </div>

  <div class="report-page" id="report-success" style="display:none">
    <div class="report-card success-screen">
      <div class="check">âœ…</div>
      <h2>Report Submitted!</h2>
      <p>Your road issue has been reported successfully. Our AI is verifying it now.</p>
      <div class="report-id">Report ID: RD-2026-00847</div>
      <div style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap">
        <button class="btn-continue" onclick="showPage('map')">ğŸ—ºï¸ Track on Map</button>
        <button class="btn-continue" onclick="goStep(1)" style="background:var(--navy);color:white">Report Another</button>
      </div>
    </div>
  </div>

</div>


<div id="page-map" class="page">
  <div class="map-layout">

    <!-- Sidebar -->
    <div class="map-sidebar">
      <div class="sidebar-header">
        <h2>ğŸ“ Live Road Map</h2>
        <button style="background:var(--gray-bg);border:none;border-radius:8px;padding:8px;cursor:pointer;font-size:1rem" title="Refresh">ğŸ”„</button>
      </div>
      <div class="map-search">
        <input placeholder="ğŸ” Search location or ID..." />
      </div>
      <div class="filter-tabs">
        <button class="filter-tab active" onclick="filterMap(this,'all')">All</button>
        <button class="filter-tab" onclick="filterMap(this,'pending')">Pending</button>
        <button class="filter-tab" onclick="filterMap(this,'progress')">In Progress</button>
        <button class="filter-tab" onclick="filterMap(this,'resolved')">Resolved</button>
      </div>
      <div class="legend">
        <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div> High</div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--orange)"></div> Medium</div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div> Low/Resolved</div>
      </div>
      <div class="issue-list">
        <div class="issue-card">
          <div class="issue-card-top">
            <div class="issue-id"><span style="width:8px;height:8px;background:var(--red);border-radius:50%;display:inline-block"></span> RD-2024-00001</div>
            <span class="status-badge status-pending">Pending</span>
          </div>
          <h4>Pothole</h4>
          <div class="issue-loc">ğŸ“ Solapur Main Road, Maharashtra</div>
          <div class="issue-footer"><span>ğŸ‘¥ 12 reported</span><span>2/19/2026</span></div>
        </div>
        <div class="issue-card">
          <div class="issue-card-top">
            <div class="issue-id"><span style="width:8px;height:8px;background:var(--orange);border-radius:50%;display:inline-block"></span> RD-2024-00002</div>
            <span class="status-badge status-progress">In Progress</span>
          </div>
          <h4>Waterlogging</h4>
          <div class="issue-loc">ğŸ“Solapur-Dhule Road, Solapur</div>
          <div class="issue-footer"><span>ğŸ‘¥ 8 reported</span><span>2/19/2026</span></div>
        </div>
        <div class="issue-card">
          <div class="issue-card-top">
            <div class="issue-id"><span style="width:8px;height:8px;background:var(--purple);border-radius:50%;display:inline-block"></span> RD-2024-00003</div>
            <span class="status-badge status-approved">Approved</span>
          </div>
          <h4>Broken Road</h4>
          <div class="issue-loc">ğŸ“ 105 Zilla Parishad Roads, Solapur</div>
          <div class="issue-footer"><span>ğŸ‘¥ 5 reported</span><span>2/18/2026</span></div>
        </div>
        <div class="issue-card">
          <div class="issue-card-top">
            <div class="issue-id"><span style="width:8px;height:8px;background:var(--green);border-radius:50%;display:inline-block"></span> RD-2024-00004</div>
            <span class="status-badge status-resolved">Resolved</span>
          </div>
          <h4>Open Manhole</h4>
          <div class="issue-loc">ğŸ“ Akkalkot Road, Solapur</div>
          <div class="issue-footer"><span>ğŸ‘¥ 3 reported</span><span>2/17/2026</span></div>
        </div>
      </div>
    </div>

    <!-- Map Area -->
    <div class="map-area" style="position:relative;">
      <div id="leaflet-map" style="width:100%;height:100%;"></div>
      <div class="map-stats-bar">
        <div class="map-stat"><div class="map-stat-num ms-red" id="stat-pending">3</div><div class="map-stat-label">Pending</div></div>
        <div class="map-stat"><div class="map-stat-num ms-blue" id="stat-progress">2</div><div class="map-stat-label">In Progress</div></div>
        <div class="map-stat"><div class="map-stat-num ms-green" id="stat-resolved">1</div><div class="map-stat-label">Resolved</div></div>
      </div>
    </div>

  </div>
</div>



<div id="page-leaderboard" class="page">
  <div class="lb-page">
    <div class="lb-header">
      <div class="section-badge">ğŸ† Leaderboard</div>
      <h1 class="section-title">Top <span>Contributors</span></h1>
      <p>Celebrating citizens who are making Solapur's roads safer. Earn points, climb the ranks, and win rewards!</p>
    </div>

    <div class="lb-tabs">
      <button class="lb-tab active">All Solapur</button>
      <button class="lb-tab">My City</button>
      <button class="lb-tab">This Week</button>
    </div>

    <div class="lb-content">
      <div>
        <!-- Podium -->
        <div class="podium">
          <div class="podium-card" style="transform:translateY(20px)">
            <div class="avatar-circle av-bronze" style="background:#cd7f32;width:48px;height:48px">RK</div>
            <div class="podium-rank">ğŸ¥‰ #3</div>
            <div class="podium-name">User 453</div>
            <div class="podium-city">Solapur</div>
            <div class="podium-points">2,340</div>
            <div class="podium-pts-label">points</div>
          </div>
          <div class="podium-card first">
            <span class="crown">ğŸ‘‘</span>
            <div class="avatar-circle av-gold">PS</div>
            <div class="podium-rank">ğŸ¥‡ #1</div>
            <div class="podium-name">User 32</div>
            <div class="podium-city">Solapur</div>
            <div class="podium-points">2,850</div>
            <div class="podium-pts-label">points</div>
          </div>
          <div class="podium-card" style="transform:translateY(10px)">
            <div class="avatar-circle av-silver">AM</div>
            <div class="podium-rank">ğŸ¥ˆ #2</div>
            <div class="podium-name">User 564</div>
            <div class="podium-city">Solapur</div>
            <div class="podium-points">2,590</div>
            <div class="podium-pts-label">points</div>
          </div>
        </div>

        <!-- Table -->
        <div class="lb-table">
          <div class="lb-table-head">
            <div>Rank</div><div>Citizen</div><div>Reports</div><div>Streak</div><div>Points</div>
          </div>
          <div class="lb-row">
            <div class="lb-rank">4</div>
            <div class="lb-citizen"><div class="av-sm" style="background:#fce7f3;color:#be185d">SP</div><div><div class="lb-name">Sunita Patel</div><div class="lb-city">Ahmedabad</div></div></div>
            <div class="lb-num">31</div>
            <div><span class="streak-badge">ğŸ”¥ 7</span></div>
            <div class="lb-points">2,180</div>
          </div>
          <div class="lb-row">
            <div class="lb-rank">5</div>
            <div class="lb-citizen"><div class="av-sm" style="background:#d1fae5;color:#065f46">MR</div><div><div class="lb-name">Mohan Rao</div><div class="lb-city">Hyderabad</div></div></div>
            <div class="lb-num">28</div>
            <div><span class="streak-badge">ğŸ”¥ 5</span></div>
            <div class="lb-points">1,960</div>
          </div>
          <div class="lb-row">
            <div class="lb-rank">6</div>
            <div class="lb-citizen"><div class="av-sm" style="background:#ede9fe;color:#5b21b6">NK</div><div><div class="lb-name">Neha Kapoor</div><div class="lb-city">Chennai</div></div></div>
            <div class="lb-num">24</div>
            <div><span class="streak-badge">ğŸ”¥ 4</span></div>
            <div class="lb-points">1,720</div>
          </div>
          <!-- Current user row -->
          <div class="lb-row" style="background:#fffbeb;border-left:3px solid var(--gold)">
            <div class="lb-rank" style="color:var(--gold)">#24</div>
            <div class="lb-citizen"><div class="av-sm av-navy">YU</div><div><div class="lb-name">Your Name</div><div class="lb-city" style="color:var(--gold);font-weight:600">Bangalore</div></div></div>
            <div class="lb-num">12</div>
            <div><span class="streak-badge">ğŸ”¥ 3</span></div>
            <div class="lb-points">150</div>
          </div>
        </div>
      </div>

      <div class="your-stats">
        <div class="ys-title">Your Stats</div>
        <div class="ys-user">
          <div class="avatar-circle av-navy" style="width:48px;height:48px;flex-shrink:0">YU</div>
          <div>
            <div class="ys-name">Your Name</div>
            <div class="ys-city">ğŸ“ Solapur </div>
            <div class="ys-rank">Rank #24</div>
          </div>
        </div>
        <div class="ys-grid">
          <div class="ys-stat"><div class="ys-stat-num">150</div><div class="ys-stat-label">Points</div></div>
          <div class="ys-stat"><div class="ys-stat-num">12</div><div class="ys-stat-label">Reports</div></div>
          <div class="ys-stat"><div class="ys-stat-num ys-stat-gold">ğŸ”¥ 3</div><div class="ys-stat-label">Streak</div></div>
        </div>
        <div style="margin-top:16px;padding:14px;background:var(--gold-light);border-radius:10px;font-size:0.83rem;color:var(--navy)">
          <strong>ğŸ’¡ Pro tip:</strong> Report 3 more issues this week to move up to Rank #20!
        </div>
      </div>
    </div>
  </div>
</div>



<div id="page-about" class="page">

  <div class="about-hero">
    <div class="section-badge" style="background:rgba(240,165,0,0.2);color:var(--gold);margin-bottom:20px">ğŸ›£ï¸ About Transitron</div>
    <h1>Making Solapur's Roads <span>Safer</span></h1>
    <p>Transitron is Solapur's leading smart civic platform that empowers citizens to report road damage and enables government transparency in infrastructure maintenance.</p>
  </div>

  <div class="about-mission">
    <div class="mission-text">
      <div class="section-badge">ğŸ¯ Our Mission</div>
      <h2>Transforming Solapur's Road Infrastructure</h2>
      <p>We believe that every citizen has the right to safe roads. Transitron bridges the gap between citizens and government by providing a transparent, efficient, and gamified platform for road damage reporting.</p>
      <p>Using AI-powered verification, real-time tracking, and community engagement, we're making road maintenance accountable, transparent, and citizen-driven.</p>
      <button class="btn-cta" onclick="showPage('report')">Join the Movement â†’</button>
    </div>
    <div class="mission-values">
      <div class="value-card"><div class="val-icon">ğŸ¯</div><h4>Transparency</h4><p>Every complaint is tracked publicly with full visibility into resolution progress.</p></div>
      <div class="value-card"><div class="val-icon">ğŸ‘¥</div><h4>Citizen First</h4><p>Built for citizens, by citizens. Your voice matters in making roads safer.</p></div>
      <div class="value-card"><div class="val-icon">ğŸ›¡ï¸</div><h4>Accountability</h4><p>Government departments are held accountable with time-bound resolutions.</p></div>
      <div class="value-card"><div class="val-icon">â¤ï¸</div><h4>Community</h4><p>Unite with fellow citizens to build safer roads for everyone.</p></div>
    </div>
  </div>

  <div class="about-team">
    <div class="about-team-inner">
      <div class="section-header">
        <div class="section-badge">ğŸ“Š Our Impact</div>
        <h2 class="section-title">Numbers That <span>Matter</span></h2>
      </div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-top:40px">
        <div style="background:white;border-radius:16px;padding:28px;text-align:center;border:1px solid var(--border)"><div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:2.4rem;font-weight:900;color:var(--navy)">2,847</div><div style="color:var(--muted);font-size:0.88rem;margin-top:4px">Total Reports</div></div>
        <div style="background:white;border-radius:16px;padding:28px;text-align:center;border:1px solid var(--border)"><div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:2.4rem;font-weight:900;color:var(--green)">1,234</div><div style="color:var(--muted);font-size:0.88rem;margin-top:4px">Issues Resolved</div></div>
        <div style="background:white;border-radius:16px;padding:28px;text-align:center;border:1px solid var(--border)"><div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:2.4rem;font-weight:900;color:var(--gold)">156</div><div style="color:var(--muted);font-size:0.88rem;margin-top:4px">Cities Covered</div></div>
        <div style="background:white;border-radius:16px;padding:28px;text-align:center;border:1px solid var(--border)"><div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:2.4rem;font-weight:900;color:var(--navy)">92%</div><div style="color:var(--muted);font-size:0.88rem;margin-top:4px">Satisfaction Rate</div></div>
        <div style="background:white;border-radius:16px;padding:28px;text-align:center;border:1px solid var(--border)"><div style="font-family:'Plus Jakarta Sans',sans-serif;font-size:2.4rem;font-weight:900;color:var(--purple)">48h</div><div style="color:var(--muted);font-size:0.88rem;margin-top:4px">Avg. Resolution Time</div></div>
      </div>
    </div>
  </div>

  <footer>
    <div class="footer-logo">Trans<span>itron</span></div>
    <p>Empowering citizens. Enabling transparency. Building safer roads for Solapur.</p>
    <p style="margin-top:12px">Â© 2026 Transitron. All rights reserved.</p>
  </footer>
</div>



<div id="page-login" class="page">
  <div class="login-layout">

    <!-- Left Panel -->
    <div class="login-left">
      <div class="login-brand" onclick="showPage('home')">
        <div class="logo-icon" style="width:44px;height:44px">
          <svg width="22" height="22" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
            <circle cx="12" cy="9" r="2.5"/>
          </svg>
          <div class="logo-dot"></div>
        </div>
        <span class="logo-text">Trans<span>itron</span></span>
      </div>
      <div class="login-left-content">
        <h1 class="login-left-title">Solapur's Smarter Roads Start Here</h1>
        <p class="login-left-sub">Join thousands of citizens making Solapur safer â€” report issues, track repairs, earn rewards.</p>
        <div class="login-features">
          <div class="login-feat"><span>ğŸ“¸</span> Report road damage in seconds</div>
          <div class="login-feat"><span>ğŸ“</span> Track your complaint live on the map</div>
          <div class="login-feat"><span>ğŸ†</span> Earn points and climb the leaderboard</div>
          <div class="login-feat"><span>ğŸ””</span> Get notified when roads are fixed</div>
        </div>
      </div>
      <div class="login-left-footer">Â© 2026 Transitron Â· Solapur Municipal Corporation</div>
    </div>

    <!-- Right Panel -->
    <div class="login-right">
      <div class="login-box">

        <!-- User Type Toggle -->
        <div class="login-type-toggle">
          <button class="login-type-btn active" id="tab-citizen" onclick="switchLoginType('citizen')">
            ğŸ‘¤ Citizen
          </button>
          <button class="login-type-btn" id="tab-official" onclick="switchLoginType('official')">
            ğŸ›ï¸ Official / Admin
          </button>
        </div>

        <!-- Citizen Login -->
        <div id="login-citizen">
          <h2 class="login-title">Welcome back</h2>
          <p class="login-sub">Sign in to your Transitron account</p>

          <!-- Method Tabs -->
          <div class="login-method-tabs">
            <button class="login-method-tab active" onclick="switchMethod(this,'email-form')">Email</button>
            <button class="login-method-tab" onclick="switchMethod(this,'phone-form')">Phone / OTP</button>
          </div>

          <!-- Email Form -->
          <div id="email-form">
            <div class="form-group">
              <label class="form-label">Email Address</label>
              <input class="form-input" type="email" placeholder="you@example.com" />
            </div>
            <div class="form-group">
              <label class="form-label" style="display:flex;justify-content:space-between">
                Password
                <span class="login-link" onclick="">Forgot password?</span>
              </label>
              <div class="password-wrap">
                <input class="form-input" id="pw-citizen" type="password" placeholder="Enter your password" />
                <button class="pw-toggle" onclick="togglePw('pw-citizen',this)">ğŸ‘</button>
              </div>
            </div>
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:20px">
              <input type="checkbox" id="remember" style="width:15px;height:15px;cursor:pointer"/>
              <label for="remember" style="font-size:0.85rem;color:var(--muted);cursor:pointer">Remember me</label>
            </div>
            <button class="btn-login-submit" onclick="doLogin('citizen')">Sign In</button>
          </div>

          <!-- Phone / OTP Form -->
          <div id="phone-form" style="display:none">
            <div class="form-group">
              <label class="form-label">Mobile Number</label>
              <div style="display:flex;gap:8px">
                <select class="form-input" style="width:90px;flex-shrink:0">
                  <option>ğŸ‡®ğŸ‡³ +91</option>
                </select>
                <input class="form-input" id="phone-input" type="tel" placeholder="9876543210" />
              </div>
            </div>
            <button class="btn-login-submit" id="send-otp-btn" onclick="sendOTP()">Send OTP</button>
            <div id="otp-section" style="display:none;margin-top:16px">
              <label class="form-label">Enter OTP</label>
              <div class="otp-boxes">
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
                <input class="otp-input" maxlength="1" type="text" oninput="otpNext(this)" />
              </div>
              <div style="font-size:0.78rem;color:var(--muted);margin-top:8px">Didn't receive it? <span class="login-link">Resend OTP</span></div>
              <button class="btn-login-submit" style="margin-top:16px" onclick="doLogin('citizen')">Verify & Sign In</button>
            </div>
          </div>

          <div class="login-divider"><span>or continue with</span></div>

          <button class="btn-google" onclick="doLogin('citizen')">
            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
            Continue with Google
          </button>

          <p class="login-signup-text">Don't have an account? <span class="login-link" onclick="showSignup()">Sign up free</span></p>
        </div>

        <!-- Official / Admin Login -->
        <div id="login-official" style="display:none">
          <div class="official-badge">ğŸ›ï¸ Municipal Official Portal</div>
          <h2 class="login-title">Official Sign In</h2>
          <p class="login-sub">Restricted to Solapur Municipal Corporation staff</p>

          <div class="form-group">
            <label class="form-label">Official ID / Email</label>
            <input class="form-input" type="email" placeholder="officer@solapurmc.gov.in" />
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="password-wrap">
              <input class="form-input" id="pw-official" type="password" placeholder="Enter your password" />
              <button class="pw-toggle" onclick="togglePw('pw-official',this)">ğŸ‘</button>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Department</label>
            <select class="form-input">
              <option value="">Select your department</option>
              <option>Roads & PWD</option>
              <option>Drainage Department</option>
              <option>Traffic Control</option>
              <option>Utilities</option>
              <option>Administration</option>
            </select>
          </div>
          <div style="background:#fef2f2;border:1px solid #fecaca;border-radius:10px;padding:12px 14px;font-size:0.82rem;color:#991b1b;margin-bottom:20px">
            ğŸ”’ This portal is for authorized personnel only. Unauthorized access is a punishable offence.
          </div>
          <button class="btn-login-submit" style="background:var(--navy)" onclick="doLogin('official')">Sign In to Dashboard</button>
        </div>

        <!-- Signup Form (hidden by default) -->
        <div id="login-signup" style="display:none">
          <h2 class="login-title">Create Account</h2>
          <p class="login-sub">Join Transitron and help fix Solapur's roads</p>
          <div class="form-group">
            <label class="form-label">Full Name</label>
            <input class="form-input" type="text" placeholder="Your full name" />
          </div>
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input class="form-input" type="email" placeholder="you@example.com" />
          </div>
          <div class="form-group">
            <label class="form-label">Mobile Number</label>
            <div style="display:flex;gap:8px">
              <select class="form-input" style="width:90px;flex-shrink:0"><option>ğŸ‡®ğŸ‡³ +91</option></select>
              <input class="form-input" type="tel" placeholder="9876543210" />
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <div class="password-wrap">
              <input class="form-input" id="pw-signup" type="password" placeholder="Create a password" />
              <button class="pw-toggle" onclick="togglePw('pw-signup',this)">ğŸ‘</button>
            </div>
          </div>
          <div style="display:flex;align-items:flex-start;gap:8px;margin-bottom:20px">
            <input type="checkbox" style="width:15px;height:15px;margin-top:2px;cursor:pointer"/>
            <span style="font-size:0.82rem;color:var(--muted)">I agree to the <span class="login-link">Terms of Service</span> and <span class="login-link">Privacy Policy</span></span>
          </div>
          <button class="btn-login-submit" onclick="doLogin('citizen')">Create Account</button>
          <p class="login-signup-text">Already have an account? <span class="login-link" onclick="backToLogin()">Sign in</span></p>
        </div>

      </div>
    </div>
  </div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADMIN DASHBOARD PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-admin" class="page">
  <div class="admin-layout">

    <!-- Sidebar -->
    <div class="admin-sidebar">
      <div class="admin-sidebar-header">
        <div class="admin-logo">
          <svg width="18" height="18" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        </div>
        <div>
          <div style="font-weight:700;font-size:0.9rem;color:white">Municipal Dashboard</div>
          <div style="font-size:0.72rem;color:rgba(255,255,255,0.5)">Solapur Corporation</div>
        </div>
      </div>
      <nav class="admin-nav">
        <div class="admin-nav-item active" onclick="adminTab(this,'overview')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
          Overview
        </div>
        <div class="admin-nav-item" onclick="adminTab(this,'complaints')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          Complaints
        </div>
        <div class="admin-nav-item" onclick="adminTab(this,'departments')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          Departments
        </div>
        <div class="admin-nav-item" onclick="adminTab(this,'analytics')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
          Analytics
        </div>
        <div class="admin-nav-item" onclick="adminTab(this,'audit')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
          Audit Log
        </div>
      </nav>
      <div class="admin-sidebar-footer">
        <button class="admin-nav-item" style="width:100%;border:none;cursor:pointer;color:rgba(255,255,255,0.5)" onclick="showPage('home')">
          <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
          Exit to Site
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="admin-main">

      <!-- Top Bar -->
      <div class="admin-topbar">
        <div>
          <div class="admin-page-title" id="admin-page-title">Overview</div>
          <div style="font-size:0.8rem;color:var(--muted)">Solapur Municipal Corporation Â· Thu, Feb 19 2026</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div style="background:var(--gold-light);color:var(--gold);padding:6px 14px;border-radius:8px;font-size:0.82rem;font-weight:700">â— Live</div>
          <div style="width:36px;height:36px;border-radius:50%;background:var(--navy);color:white;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.82rem">AD</div>
        </div>
      </div>

      <!-- OVERVIEW TAB -->
      <div class="admin-tab-content" id="tab-overview">
        <!-- KPI Cards -->
        <div class="admin-kpi-grid">
          <div class="kpi-card">
            <div class="kpi-icon" style="background:#dbeafe">ğŸ“‹</div>
            <div class="kpi-num">47</div>
            <div class="kpi-label">Total Complaints</div>
            <div class="kpi-trend up">â†‘ 12 this week</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon" style="background:#fef9c3">â³</div>
            <div class="kpi-num">18</div>
            <div class="kpi-label">Pending Review</div>
            <div class="kpi-trend down">â†“ 3 from yesterday</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon" style="background:#ffedd5">ğŸ”§</div>
            <div class="kpi-num">11</div>
            <div class="kpi-label">In Progress</div>
            <div class="kpi-trend up">â†‘ 2 assigned today</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-icon" style="background:#dcfce7">âœ…</div>
            <div class="kpi-num">18</div>
            <div class="kpi-label">Resolved</div>
            <div class="kpi-trend up">â†‘ 5 this week</div>
          </div>
        </div>

        <!-- Recent + Dept Status -->
        <div class="admin-two-col">
          <div class="admin-card">
            <div class="admin-card-title">Recent Complaints</div>
            <table class="admin-table">
              <thead><tr><th>ID</th><th>Type</th><th>Location</th><th>Severity</th><th>Status</th><th>Action</th></tr></thead>
              <tbody>
                <tr>
                  <td class="admin-id">RD-00047</td>
                  <td>Pothole</td>
                  <td>Vijapur Road</td>
                  <td><span class="sev-pill high">High</span></td>
                  <td><span class="status-badge status-pending">Pending</span></td>
                  <td><button class="admin-btn-assign" onclick="assignComplaint(this)">Assign</button></td>
                </tr>
                <tr>
                  <td class="admin-id">RD-00046</td>
                  <td>Waterlogging</td>
                  <td>Pune Naka</td>
                  <td><span class="sev-pill med">Medium</span></td>
                  <td><span class="status-badge status-progress">In Progress</span></td>
                  <td><button class="admin-btn-view">View</button></td>
                </tr>
                <tr>
                  <td class="admin-id">RD-00045</td>
                  <td>Broken Road</td>
                  <td>Hotgi Road</td>
                  <td><span class="sev-pill high">High</span></td>
                  <td><span class="status-badge status-pending">Pending</span></td>
                  <td><button class="admin-btn-assign" onclick="assignComplaint(this)">Assign</button></td>
                </tr>
                <tr>
                  <td class="admin-id">RD-00044</td>
                  <td>Open Manhole</td>
                  <td>Solapur Bazaar</td>
                  <td><span class="sev-pill high">High</span></td>
                  <td><span class="status-badge status-approved">Approved</span></td>
                  <td><button class="admin-btn-view">View</button></td>
                </tr>
                <tr>
                  <td class="admin-id">RD-00043</td>
                  <td>Pothole</td>
                  <td>Akkalkot Road</td>
                  <td><span class="sev-pill low">Low</span></td>
                  <td><span class="status-badge status-resolved">Resolved</span></td>
                  <td><button class="admin-btn-view">View</button></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="admin-card">
            <div class="admin-card-title">Department Workload</div>
            <div class="dept-list">
              <div class="dept-item">
                <div class="dept-info">
                  <div class="dept-name">Roads & PWD</div>
                  <div class="dept-count">14 complaints</div>
                </div>
                <div class="dept-bar-wrap"><div class="dept-bar" style="width:75%;background:var(--red)"></div></div>
                <div class="dept-pct">75%</div>
              </div>
              <div class="dept-item">
                <div class="dept-info">
                  <div class="dept-name">Drainage Dept</div>
                  <div class="dept-count">8 complaints</div>
                </div>
                <div class="dept-bar-wrap"><div class="dept-bar" style="width:50%;background:var(--orange)"></div></div>
                <div class="dept-pct">50%</div>
              </div>
              <div class="dept-item">
                <div class="dept-info">
                  <div class="dept-name">Traffic Control</div>
                  <div class="dept-count">5 complaints</div>
                </div>
                <div class="dept-bar-wrap"><div class="dept-bar" style="width:35%;background:var(--gold)"></div></div>
                <div class="dept-pct">35%</div>
              </div>
              <div class="dept-item">
                <div class="dept-info">
                  <div class="dept-name">Utilities</div>
                  <div class="dept-count">3 complaints</div>
                </div>
                <div class="dept-bar-wrap"><div class="dept-bar" style="width:20%;background:var(--green)"></div></div>
                <div class="dept-pct">20%</div>
              </div>
            </div>
            <div class="admin-card-title" style="margin-top:24px">Avg. Resolution Time</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
              <div class="mini-stat"><div class="mini-stat-num">2.4<span style="font-size:0.8rem">days</span></div><div class="mini-stat-label">Roads & PWD</div></div>
              <div class="mini-stat"><div class="mini-stat-num">3.1<span style="font-size:0.8rem">days</span></div><div class="mini-stat-label">Drainage</div></div>
              <div class="mini-stat"><div class="mini-stat-num">1.8<span style="font-size:0.8rem">days</span></div><div class="mini-stat-label">Traffic</div></div>
              <div class="mini-stat"><div class="mini-stat-num">4.2<span style="font-size:0.8rem">days</span></div><div class="mini-stat-label">Utilities</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- COMPLAINTS TAB -->
      <div class="admin-tab-content" id="tab-complaints" style="display:none">
        <div class="admin-card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:12px">
            <div class="admin-card-title" style="margin:0">All Complaints</div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <select class="admin-select"><option>All Status</option><option>Pending</option><option>In Progress</option><option>Resolved</option></select>
              <select class="admin-select"><option>All Severity</option><option>High</option><option>Medium</option><option>Low</option></select>
              <select class="admin-select"><option>All Departments</option><option>Roads & PWD</option><option>Drainage</option><option>Traffic</option></select>
            </div>
          </div>
          <table class="admin-table">
            <thead><tr><th>ID</th><th>Type</th><th>Location</th><th>Reported By</th><th>Votes</th><th>Severity</th><th>Department</th><th>Status</th><th>Action</th></tr></thead>
            <tbody>
              <tr><td class="admin-id">RD-00047</td><td>Pothole</td><td>Vijapur Road, Ward 12</td><td>Rahul M.</td><td>ğŸ‘¥ 9</td><td><span class="sev-pill high">High</span></td><td><span class="dept-tag">Roads & PWD</span></td><td><span class="status-badge status-pending">Pending</span></td><td><button class="admin-btn-assign" onclick="assignComplaint(this)">Assign</button></td></tr>
              <tr><td class="admin-id">RD-00046</td><td>Waterlogging</td><td>Pune Naka Junction</td><td>Priya S.</td><td>ğŸ‘¥ 12</td><td><span class="sev-pill med">Medium</span></td><td><span class="dept-tag">Drainage Dept</span></td><td><span class="status-badge status-progress">In Progress</span></td><td><button class="admin-btn-view">View</button></td></tr>
              <tr><td class="admin-id">RD-00045</td><td>Broken Road</td><td>Hotgi Road, Ward 7</td><td>Amit K.</td><td>ğŸ‘¥ 7</td><td><span class="sev-pill high">High</span></td><td><span class="dept-tag">Roads & PWD</span></td><td><span class="status-badge status-pending">Pending</span></td><td><button class="admin-btn-assign" onclick="assignComplaint(this)">Assign</button></td></tr>
              <tr><td class="admin-id">RD-00044</td><td>Open Manhole</td><td>Solapur Bazaar</td><td>Sneha P.</td><td>ğŸ‘¥ 15</td><td><span class="sev-pill high">High</span></td><td><span class="dept-tag">Utilities</span></td><td><span class="status-badge status-approved">Approved</span></td><td><button class="admin-btn-view">View</button></td></tr>
              <tr><td class="admin-id">RD-00043</td><td>Pothole</td><td>Akkalkot Road</td><td>Vijay R.</td><td>ğŸ‘¥ 4</td><td><span class="sev-pill low">Low</span></td><td><span class="dept-tag">Roads & PWD</span></td><td><span class="status-badge status-resolved">Resolved âœ“</span></td><td><button class="admin-btn-view">View</button></td></tr>
              <tr><td class="admin-id">RD-00042</td><td>Accident Zone</td><td>Bijapur Road Crossing</td><td>Meena D.</td><td>ğŸ‘¥ 21</td><td><span class="sev-pill high">High</span></td><td><span class="dept-tag">Traffic Control</span></td><td><span class="status-badge status-progress">In Progress</span></td><td><button class="admin-btn-view">View</button></td></tr>
              <tr><td class="admin-id">RD-00041</td><td>Waterlogging</td><td>Railway Station Area</td><td>Rajan S.</td><td>ğŸ‘¥ 8</td><td><span class="sev-pill med">Medium</span></td><td><span class="dept-tag">Drainage Dept</span></td><td><span class="status-badge status-pending">Pending</span></td><td><button class="admin-btn-assign" onclick="assignComplaint(this)">Assign</button></td></tr>
            </tbody>
          </table>
        </div>

        <!-- Assign Modal -->
        <div class="assign-modal" id="assign-modal" style="display:none">
          <div class="assign-modal-box">
            <div class="admin-card-title">Assign Complaint</div>
            <div class="form-group" style="margin-top:16px">
              <label class="form-label">Assign to Department</label>
              <select class="form-input admin-select" id="assign-dept">
                <option>Roads & PWD</option>
                <option>Drainage Department</option>
                <option>Traffic Control</option>
                <option>Utilities</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Priority Level</label>
              <select class="form-input admin-select">
                <option>High â€” Resolve within 24hrs</option>
                <option>Medium â€” Resolve within 3 days</option>
                <option>Low â€” Resolve within 7 days</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Notes for Department</label>
              <textarea class="form-input" rows="2" placeholder="Add instructions..."></textarea>
            </div>
            <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px">
              <button class="btn-back" onclick="closeAssign()">Cancel</button>
              <button class="btn-continue" onclick="confirmAssign()">âœ“ Confirm Assignment</button>
            </div>
          </div>
        </div>
      </div>

      <!-- DEPARTMENTS TAB -->
      <div class="admin-tab-content" id="tab-departments" style="display:none">
        <div class="admin-kpi-grid">
          <div class="kpi-card"><div class="kpi-icon" style="background:#dbeafe">ğŸ—ï¸</div><div class="kpi-num">14</div><div class="kpi-label">Roads & PWD</div><div class="kpi-trend down">2.4 day avg</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#ccfbf1">ğŸ’§</div><div class="kpi-num">8</div><div class="kpi-label">Drainage Dept</div><div class="kpi-trend down">3.1 day avg</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#fef9c3">ğŸš¦</div><div class="kpi-num">5</div><div class="kpi-label">Traffic Control</div><div class="kpi-trend up">1.8 day avg</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#ede9fe">âš¡</div><div class="kpi-num">3</div><div class="kpi-label">Utilities</div><div class="kpi-trend down">4.2 day avg</div></div>
        </div>
        <div class="admin-two-col">
          <div class="admin-card">
            <div class="admin-card-title">Department Performance</div>
            <table class="admin-table" style="margin-top:12px">
              <thead><tr><th>Department</th><th>Assigned</th><th>Resolved</th><th>Overdue</th><th>Rating</th><th>SLA Status</th></tr></thead>
              <tbody>
                <tr><td>Roads & PWD</td><td>14</td><td>9</td><td>2</td><td>â­ 4.1</td><td><span class="sev-pill med">At Risk</span></td></tr>
                <tr><td>Drainage Dept</td><td>8</td><td>5</td><td>1</td><td>â­ 3.8</td><td><span class="sev-pill high">Overdue</span></td></tr>
                <tr><td>Traffic Control</td><td>5</td><td>5</td><td>0</td><td>â­ 4.7</td><td><span class="sev-pill low">On Track</span></td></tr>
                <tr><td>Utilities</td><td>3</td><td>1</td><td>1</td><td>â­ 3.5</td><td><span class="sev-pill high">Overdue</span></td></tr>
              </tbody>
            </table>
          </div>
          <div class="admin-card">
            <div class="admin-card-title">SLA Tracking</div>
            <div style="margin-top:16px;display:flex;flex-direction:column;gap:14px">
              <div><div style="display:flex;justify-content:space-between;font-size:0.82rem;margin-bottom:6px"><span>Roads & PWD â€” SLA Compliance</span><span style="font-weight:700">64%</span></div><div style="background:var(--border);border-radius:100px;height:8px"><div style="width:64%;background:var(--orange);border-radius:100px;height:8px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.82rem;margin-bottom:6px"><span>Drainage Dept â€” SLA Compliance</span><span style="font-weight:700">52%</span></div><div style="background:var(--border);border-radius:100px;height:8px"><div style="width:52%;background:var(--red);border-radius:100px;height:8px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.82rem;margin-bottom:6px"><span>Traffic Control â€” SLA Compliance</span><span style="font-weight:700">100%</span></div><div style="background:var(--border);border-radius:100px;height:8px"><div style="width:100%;background:var(--green);border-radius:100px;height:8px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.82rem;margin-bottom:6px"><span>Utilities â€” SLA Compliance</span><span style="font-weight:700">33%</span></div><div style="background:var(--border);border-radius:100px;height:8px"><div style="width:33%;background:var(--red);border-radius:100px;height:8px"></div></div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ANALYTICS TAB -->
      <div class="admin-tab-content" id="tab-analytics" style="display:none">
        <div class="admin-kpi-grid">
          <div class="kpi-card"><div class="kpi-icon" style="background:var(--gold-light)">ğŸ“ˆ</div><div class="kpi-num">47</div><div class="kpi-label">Total Reports</div><div class="kpi-trend up">â†‘ 18% this month</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#dcfce7">âš¡</div><div class="kpi-num">2.6<span style="font-size:1rem">d</span></div><div class="kpi-label">Avg Resolution</div><div class="kpi-trend up">â†“ 0.4d improvement</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#ede9fe">â­</div><div class="kpi-num">4.2</div><div class="kpi-label">Citizen Rating</div><div class="kpi-trend up">â†‘ 0.3 this month</div></div>
          <div class="kpi-card"><div class="kpi-icon" style="background:#dbeafe">ğŸ¤–</div><div class="kpi-num">94%</div><div class="kpi-label">AI Accuracy</div><div class="kpi-trend up">â†‘ 2% this month</div></div>
        </div>
        <div class="admin-two-col">
          <div class="admin-card">
            <div class="admin-card-title">Reports by Issue Type</div>
            <div style="margin-top:16px;display:flex;flex-direction:column;gap:12px">
              <div><div style="display:flex;justify-content:space-between;font-size:0.83rem;margin-bottom:5px"><span>ğŸ•³ï¸ Pothole</span><span style="font-weight:700">21 reports</span></div><div style="background:var(--border);border-radius:100px;height:10px"><div style="width:68%;background:var(--navy);border-radius:100px;height:10px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.83rem;margin-bottom:5px"><span>ğŸ’§ Waterlogging</span><span style="font-weight:700">11 reports</span></div><div style="background:var(--border);border-radius:100px;height:10px"><div style="width:38%;background:#3b82f6;border-radius:100px;height:10px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.83rem;margin-bottom:5px"><span>ğŸš§ Broken Road</span><span style="font-weight:700">8 reports</span></div><div style="background:var(--border);border-radius:100px;height:10px"><div style="width:26%;background:var(--orange);border-radius:100px;height:10px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.83rem;margin-bottom:5px"><span>âš ï¸ Open Manhole</span><span style="font-weight:700">5 reports</span></div><div style="background:var(--border);border-radius:100px;height:10px"><div style="width:16%;background:var(--red);border-radius:100px;height:10px"></div></div></div>
              <div><div style="display:flex;justify-content:space-between;font-size:0.83rem;margin-bottom:5px"><span>ğŸš— Accident Zone</span><span style="font-weight:700">2 reports</span></div><div style="background:var(--border);border-radius:100px;height:10px"><div style="width:7%;background:var(--purple);border-radius:100px;height:10px"></div></div></div>
            </div>
          </div>
          <div class="admin-card">
            <div class="admin-card-title">Top Reported Wards â€“ Solapur</div>
            <div style="margin-top:16px;display:flex;flex-direction:column;gap:10px">
              <div class="ward-row"><div class="ward-name">Ward 12 â€“ Vijapur Road</div><div class="ward-count">9 reports</div><span class="sev-pill high">High</span></div>
              <div class="ward-row"><div class="ward-name">Ward 7 â€“ Hotgi Road</div><div class="ward-count">7 reports</div><span class="sev-pill high">High</span></div>
              <div class="ward-row"><div class="ward-name">Ward 3 â€“ Pune Naka</div><div class="ward-count">6 reports</div><span class="sev-pill med">Medium</span></div>
              <div class="ward-row"><div class="ward-name">Ward 18 â€“ Akkalkot Road</div><div class="ward-count">5 reports</div><span class="sev-pill med">Medium</span></div>
              <div class="ward-row"><div class="ward-name">Ward 5 â€“ Solapur Bazaar</div><div class="ward-count">4 reports</div><span class="sev-pill low">Low</span></div>
            </div>
          </div>
        </div>
      </div>

      <!-- AUDIT LOG TAB -->
      <div class="admin-tab-content" id="tab-audit" style="display:none">
        <div class="admin-card">
          <div class="admin-card-title">System Audit Log</div>
          <div style="margin-top:4px;font-size:0.8rem;color:var(--muted);margin-bottom:16px">All actions are geo-tagged and timestamped for accountability</div>
          <table class="admin-table">
            <thead><tr><th>Timestamp</th><th>Action</th><th>Complaint ID</th><th>By</th><th>Details</th></tr></thead>
            <tbody>
              <tr><td style="color:var(--muted);font-size:0.78rem">19 Feb 2026, 10:42</td><td><span class="audit-tag tag-assign">Assigned</span></td><td class="admin-id">RD-00047</td><td>Admin (AD)</td><td>Assigned to Roads & PWD Â· Priority: High</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">19 Feb 2026, 10:30</td><td><span class="audit-tag tag-verify">AI Verified</span></td><td class="admin-id">RD-00047</td><td>System</td><td>Pothole detected Â· Confidence 91% Â· Severity: High</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">19 Feb 2026, 10:28</td><td><span class="audit-tag tag-new">New Report</span></td><td class="admin-id">RD-00047</td><td>Rahul M.</td><td>Pothole Â· Vijapur Road Â· GPS: 17.6868Â°N 75.9092Â°E</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">19 Feb 2026, 09:15</td><td><span class="audit-tag tag-resolve">Resolved</span></td><td class="admin-id">RD-00043</td><td>Roads & PWD</td><td>Repair completed Â· Citizen rating: â­ 4/5</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">19 Feb 2026, 08:50</td><td><span class="audit-tag tag-assign">Assigned</span></td><td class="admin-id">RD-00046</td><td>Admin (AD)</td><td>Assigned to Drainage Dept Â· Priority: Medium</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">18 Feb 2026, 17:22</td><td><span class="audit-tag tag-verify">AI Verified</span></td><td class="admin-id">RD-00046</td><td>System</td><td>Waterlogging detected Â· Confidence 87%</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">18 Feb 2026, 16:44</td><td><span class="audit-tag tag-new">New Report</span></td><td class="admin-id">RD-00046</td><td>Priya S.</td><td>Waterlogging Â· Pune Naka Â· GPS: 17.6943Â°N 75.8942Â°E</td></tr>
              <tr><td style="color:var(--muted);font-size:0.78rem">18 Feb 2026, 14:10</td><td><span class="audit-tag tag-resolve">Resolved</span></td><td class="admin-id">RD-00041</td><td>Drainage Dept</td><td>Drain cleared Â· Citizen rating: â­ 3/5</td></tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="app.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
try {
/* â”€â”€ Shared report store â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
var _userReports = [];

/* â”€â”€ Location Autocomplete (Nominatim, free, no key) â”€â”€â”€â”€â”€â”€ */
var _searchTimer = null;

function locationSearch(val) {
  clearTimeout(_searchTimer);
  var box = document.getElementById('location-suggestions');
  if (!val || val.length < 3) { box.style.display = 'none'; return; }
  _searchTimer = setTimeout(function() {
    fetch('https://nominatim.openstreetmap.org/search?format=json&q=' + encodeURIComponent(val) + '&countrycodes=in&limit=6&addressdetails=1')
      .then(function(r){ return r.json(); })
      .then(function(results) {
        if (!results.length) { box.style.display = 'none'; return; }
        box.innerHTML = '';
        results.forEach(function(r) {
          var item = document.createElement('div');
          item.style.cssText = 'padding:10px 14px;cursor:pointer;font-size:0.85rem;border-bottom:1px solid #f0f0f0;line-height:1.4';
          item.innerHTML = '<span style="font-weight:600;color:#1a2b5e">ğŸ“ </span>' + r.display_name;
          item.onmouseenter = function(){ this.style.background='#f8f9ff'; };
          item.onmouseleave = function(){ this.style.background='white'; };
          item.onclick = function() {
            document.getElementById('inp-location').value = r.display_name;
            document.getElementById('inp-lat').value = r.lat;
            document.getElementById('inp-lng').value = r.lon;
            box.style.display = 'none';
            document.getElementById('gps-label').textContent = 'âœ“ Location set: ' + (r.address.road || r.address.suburb || 'Selected');
            document.getElementById('gps-label').style.color = 'var(--green)';
          };
          box.appendChild(item);
        });
        box.style.display = 'block';
      }).catch(function(){ box.style.display = 'none'; });
  }, 400);
}

// Close suggestions when clicking outside
document.addEventListener('click', function(e) {
  var box = document.getElementById('location-suggestions');
  if (box && !box.contains(e.target) && e.target.id !== 'inp-location') {
    box.style.display = 'none';
  }
});

/* â”€â”€ GPS: Get current location â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getGPS() {
  var label = document.getElementById('gps-label');
  label.textContent = 'â³ Getting location...';
  if (!navigator.geolocation) { label.textContent = 'GPS not supported'; return; }
  navigator.geolocation.getCurrentPosition(function(pos) {
    var lat = pos.coords.latitude, lng = pos.coords.longitude;
    document.getElementById('inp-lat').value = lat;
    document.getElementById('inp-lng').value = lng;
    // Reverse geocode to get address
    fetch('https://nominatim.openstreetmap.org/reverse?format=json&lat='+lat+'&lon='+lng)
      .then(function(r){ return r.json(); })
      .then(function(r) {
        var addr = r.display_name || (lat.toFixed(5) + ', ' + lng.toFixed(5));
        document.getElementById('inp-location').value = addr;
        label.textContent = 'âœ“ GPS location captured';
        label.style.color = 'var(--green)';
      }).catch(function(){
        document.getElementById('inp-location').value = lat.toFixed(5) + ', ' + lng.toFixed(5);
        label.textContent = 'âœ“ GPS location captured';
        label.style.color = 'var(--green)';
      });
  }, function() {
    label.textContent = 'âš ï¸ Could not get location. Please type manually.';
    label.style.color = 'var(--red)';
  });
}

/* â”€â”€ Map: Leaflet setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
var _mapInit = false, _leafletMap = null, _allMarkers = [];

var _baseReports = [
  {id:'RD-001', type:'Pothole',       loc:'Solapur Main Road',     lat:17.6868, lng:75.9012, sev:'high',   st:'pending',  v:12},
  {id:'RD-002', type:'Waterlogging',  loc:'Solapur-Dhule Road',    lat:17.7100, lng:75.9200, sev:'medium', st:'progress', v:8},
  {id:'RD-003', type:'Broken Road',   loc:'Zilla Parishad Roads',  lat:17.6700, lng:75.8900, sev:'high',   st:'approved', v:5},
  {id:'RD-004', type:'Open Manhole',  loc:'Akkalkot Road',         lat:17.6600, lng:75.9150, sev:'low',    st:'resolved', v:3},
  {id:'RD-005', type:'Pothole',       loc:'Vijapur Road Ward 12',  lat:17.7050, lng:75.8980, sev:'high',   st:'pending',  v:9},
  {id:'RD-006', type:'Accident Zone', loc:'Bijapur Road Crossing', lat:17.6750, lng:75.9300, sev:'high',   st:'progress', v:21}
];
var _sevColors = {high:'#ef4444', medium:'#f97316', low:'#22c55e'};
var _stLabels  = {pending:'Pending', progress:'In Progress', approved:'Approved', resolved:'Resolved'};

function _makeMarker(r) {
  var c = _sevColors[r.sev] || '#6b7280';
  var icon = L.divIcon({
    className:'',
    html:'<div style="width:18px;height:18px;background:'+c+';border:3px solid #fff;border-radius:50%;box-shadow:0 2px 6px rgba(0,0,0,0.4)"></div>',
    iconSize:[18,18], iconAnchor:[9,9]
  });
  var isNew = !!r.isNew;
  var m = L.marker([r.lat,r.lng],{icon}).addTo(_leafletMap);
  m.bindPopup(
    '<div style="font-family:sans-serif;min-width:190px">' +
    (isNew ? '<div style="background:#f0fdf4;border:1px solid #22c55e;border-radius:6px;padding:4px 8px;font-size:0.68rem;font-weight:700;color:#15803d;margin-bottom:8px">ğŸ†• Just Reported</div>' : '') +
    '<div style="font-size:0.68rem;color:#6b7280">'+r.id+'</div>'+
    '<div style="font-size:0.95rem;font-weight:700;color:#1a2b5e;margin:4px 0">'+r.type+'</div>'+
    '<div style="font-size:0.75rem;color:#6b7280;margin-bottom:8px">ğŸ“ '+(r.loc.length > 60 ? r.loc.substring(0,60)+'...' : r.loc)+'</div>'+
    '<span style="background:'+c+';color:#fff;padding:2px 8px;border-radius:100px;font-size:0.68rem;font-weight:700">'+r.sev.toUpperCase()+'</span> '+
    '<span style="background:#f3f4f8;padding:2px 8px;border-radius:100px;font-size:0.68rem;font-weight:600;margin-left:4px">'+(_stLabels[r.st]||r.st)+'</span>'+
    '<div style="font-size:0.72rem;color:#6b7280;margin-top:8px">ğŸ‘¥ '+(r.v||1)+' reported</div>'+
    '</div>'
  );
  m._st = r.st;
  _allMarkers.push(m);
  return m;
}

function _buildMap() {
  if (_mapInit) { if(_leafletMap) _leafletMap.invalidateSize(); return; }
  var el = document.getElementById('leaflet-map');
  if (!el) return;
  _mapInit = true;
  _leafletMap = L.map('leaflet-map').setView([17.6868, 75.9092], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'Â© OpenStreetMap', maxZoom:19
  }).addTo(_leafletMap);
  _baseReports.forEach(_makeMarker);
  // Add any reports submitted during this session
  _userReports.forEach(_makeMarker);
  setTimeout(function(){ _leafletMap.invalidateSize(); }, 400);
}

/* â”€â”€ Add new report pin to map â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function addReportToMap(type, sev, loc, lat, lng) {
  var id = 'RD-2026-' + String(Date.now()).slice(-5);
  var report = { id:id, type:type, loc:loc, lat:lat||17.6868, lng:lng||75.9092, sev:sev||'medium', st:'pending', v:1, isNew:true };
  _userReports.push(report);

  // Update stat counter
  var el = document.getElementById('stat-pending');
  if (el) el.textContent = parseInt(el.textContent||0) + 1;

  // If map is already open, add pin immediately and fly to it
  if (_leafletMap) {
    var m = _makeMarker(report);
    m.openPopup();
    _leafletMap.flyTo([report.lat, report.lng], 15, { duration: 1.5 });
  }
}

/* â”€â”€ Hook submitReport to also pin location on map â”€â”€â”€â”€â”€â”€â”€â”€ */
var _origSubmit = window.submitReport;
window.submitReport = function() {
  var type = document.getElementById('rv-type') ? document.getElementById('rv-type').textContent : 'Road Issue';
  var sev  = (window.selectedSev || 'medium').toLowerCase();
  var loc  = document.getElementById('inp-location') ? document.getElementById('inp-location').value : '';
  var lat  = parseFloat(document.getElementById('inp-lat') ? document.getElementById('inp-lat').value : '');
  var lng  = parseFloat(document.getElementById('inp-lng') ? document.getElementById('inp-lng').value : '');

  // Use Solapur center if no coordinates
  if (isNaN(lat)) lat = 17.6868 + (Math.random()-0.5)*0.04;
  if (isNaN(lng)) lng = 75.9092 + (Math.random()-0.5)*0.04;

  addReportToMap(type, sev, loc || 'Solapur', lat, lng);
  if (_origSubmit) _origSubmit();
};

/* â”€â”€ Filter tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
window.filterMapMarkers = function(btn, filter) {
  document.querySelectorAll('.filter-tab').forEach(function(b){ b.classList.remove('active'); });
  btn.classList.add('active');
  if (!_leafletMap) return;
  _allMarkers.forEach(function(m){
    (filter==='all'||m._st===filter) ? m.addTo(_leafletMap) : _leafletMap.removeLayer(m);
  });
};

/* â”€â”€ showPage hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
var _origShowPage = window.showPage;
window.showPage = function(name) {
  try { _origShowPage(name); } catch(e) {}
  if (name === 'map') setTimeout(_buildMap, 250);
};

} catch(err) { console.warn('Map/Location error:', err); }
</script>
</body>
</html>
